@import "tailwindcss";
@import "@vue-flow/core/dist/style.css";
@import "@vue-flow/core/dist/theme-default.css";
@import "@vue-flow/controls/dist/style.css";

@custom-variant dark (&:where(.dark, .dark *));

:root {
  /* Status colors */
  --status-locked: #4a506a;
  --status-in-progress: #3b82f6;
  --status-completed: #22c55e;
  --status-mastered: #f59e0b;

  /* Unlocked (computed, not stored) — pale, desaturated: subtle step above locked */
  --status-unlocked: #9db5b2;
  --status-unlocked-glow: rgba(157, 181, 178, 0.15);

  /* Status glow (node box-shadow) — locked has none */
  --status-locked-glow: transparent;
  --status-in-progress-glow: rgba(59, 130, 246, 0.4);
  --status-completed-glow: rgba(34, 197, 94, 0.35);
  --status-mastered-glow: rgba(245, 158, 11, 0.4);

  /* Focus system */
  --focus-scale: 1.03;
  --focus-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5), 0 0 20px rgba(59, 130, 246, 0.4);

  /* Energy animation speeds */
  --energy-speed: 2s;
  --energy-speed-focused: 1.7s;
  --energy-speed-slow: 2.6s;

  /* Surfaces */
  --bg-page: #fafafa;
  --bg-surface: #f2f2f8;
  --bg-muted: #e8e8f4;
  --bg-hover: #e0e0ef;
  --border: #d0d0e8;
  --border-muted: #c0c0dc;

  /* Text */
  --text-primary: #0a0a18;
  --text-secondary: #3a3a58;
  --text-body: #585880;
  --text-muted: #8080a8;
  --text-faint: #b0b0cc;

  /* Progressions */
  --prog-done-bg: #dcfce7;
  --prog-done-border: #bbf7d0;
  --prog-done-text: #166534;
  --prog-active-bg: #dbeafe;
  --prog-active-border: #bfdbfe;
  --prog-active-text: #1e40af;

  /* Req tags */
  --req-tag-bg: #fef9c3;
  --req-tag-border: #fde68a;
  --req-tag-text: #92400e;

  /* Nodes */
  --node-text: #1f2937;
  --node-badge-bg: #e8e8f4;
  --node-badge-text: #3a3a58;

  /* Drawer */
  --drawer-bg: var(--bg-page);
  --drawer-border: var(--border);
}

.dark {
  color-scheme: dark;

  /* Status colors */
  --status-locked: #2f3342;
  --status-in-progress: #5b9cf6;
  --status-completed: #4ade80;
  --status-mastered: #fbbf24;

  /* Unlocked (computed, not stored) — muted: subtle step above locked */
  --status-unlocked: #5a7a78;
  --status-unlocked-glow: rgba(90, 122, 120, 0.2);

  /* Status glow (node box-shadow) — locked has none */
  --status-locked-glow: transparent;
  --status-in-progress-glow: rgba(91, 156, 246, 0.55);
  --status-completed-glow: rgba(74, 222, 128, 0.45);
  --status-mastered-glow: rgba(251, 191, 36, 0.55);

  /* Focus system */
  --focus-shadow: 0 0 0 2px rgba(255, 255, 255, 0.9), 0 0 20px rgba(180, 210, 255, 0.45);

  /* Surfaces */
  --bg-page: #08080e;
  --bg-surface: #0e0e1c;
  --bg-muted: #15152a;
  --bg-hover: #1c1c38;
  --border: #1e1e3a;
  --border-muted: #28284a;

  /* Text — bumped to maintain readability on dark backgrounds */
  --text-primary: #e4e4f0;
  --text-secondary: #b0b0d0;
  --text-body: #9090c0;
  --text-muted: #7878b0;
  --text-faint: #6060a0;

  /* Progressions */
  --prog-done-bg: #071a0f;
  --prog-done-border: #0f3320;
  --prog-done-text: #4ade80;
  --prog-active-bg: #060d28;
  --prog-active-border: #0f2060;
  --prog-active-text: #5b9cf6;

  /* Req tags */
  --req-tag-bg: #1a1000;
  --req-tag-border: #3a2400;
  --req-tag-text: #fbbf24;

  /* Nodes */
  --node-text: #e4e4f0;
  --node-badge-bg: #15152a;
  --node-badge-text: #9898b8;

  /* Drawer */
  --drawer-bg: var(--bg-page);
  --drawer-border: var(--border);
}

body {
  background-color: var(--bg-page);
  color: var(--text-primary);
}

.vue-flow {
  background: var(--bg-page);
}

.vue-flow__transformationpane.centering {
  transition: transform 450ms cubic-bezier(0.4, 0, 0.2, 1) !important;
}

@keyframes shimmer {
  0%   { background-position: -200% center; }
  100% { background-position:  200% center; }
}
